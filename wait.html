<!DOCTYPE html>
<html>

<head>
  <script data-require="angular.js@1.3.15" data-semver="1.3.15" src="https://code.angularjs.org/1.3.15/angular.js"></script>
  <title>SmartUnit - Web Module Test Site</title>
</head>

<body ng-app='app'>
  <div ng-controller='TestCtrl'>
    <h3>
        Counter is <span id='counter' name='counter' class='counter'>{{counter}}</span> 
        and can increase 
        <a id='immediate' href='#' ng-click='incrementSync()'>immediately</a>,
        <a id='async' href='#' ng-click='incrementAsync()'>slowly</a> or
        <a id='delayed' href='#' ng-click='incrementDelayed()'>delayed</a>
      </h3>
    <span class="wait" id='wait-if' ng-if='wait'>wait...</span>
    <span class="wait" id='wait-show' ng-show='wait'>wait...</span>
    <input class="wait" type='button' id='wait-enable' ng-disabled='!wait' value='wait...' />
    <p>
    <input id='search' type="text" ng-model='search.name' placeholder='Search by name' />
    <table>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Batters</th>
        <th>Toppings</th>
      </tr>
      <tr ng-repeat="item in items | filter:search">
        <td>{{item.id}}</td>
        <td>{{item.name}}</td>
        <td>{{item.batters.join(",")}}</td>
        <td>{{item.topping.join(",")}}</td>
      </tr>
    </table>
    
    <input id='lookup' type="button" ng-click='lookup()' value='go get it' />
    <div id='output'>{{output}}</div>
    <a id="link" href="http://httpbin.org/encoding/utf8">link</a>
    
  </div>
</body>

<script>
angular.module('app', [])
.controller('TestCtrl', function($scope, $timeout) {
  $scope.counter = 0;
  $scope.wait = false;

  $scope.incrementSync = function() {
    $scope.counter++;
  };
  $scope.incrementAsync = function() {
    $scope.wait = true;
    $timeout(function() {
      $scope.counter++;
      $scope.wait = false;
      $scope.$apply();
    }, 4000);
  };
  $scope.incrementDelayed = function() {
    $timeout(function() {
      $scope.wait = true;
      $scope.$apply();
    }, 2000);
    $timeout(function() {
      $scope.counter++;
      $scope.wait = false;
      $scope.$apply();
    }, 4000);
  };
  
  $scope.items = [{
    "id": "0001",
    "type": "donut",
    "name": "Cake",
    "ppu": 0.55,
    "batters": ["Regular", "Chocolate", "Blueberry", "Devil's Food"],
    "topping": ["None", "Glazed", "Sugar", "Powdered Sugar", "Chocolate with Sprinkles","Chocolate", "Maple"]
  }, {
    "id": "0002",
    "type": "donut",
    "name": "Raised",
    "ppu": 0.55,
    "batters": ["Regular"],
    "topping": ["None", "Glazed", "Sugar", "Chocolate", "Maple"]
  }, {
    "id": "0003",
    "type": "donut",
    "name": "Old Fashioned",
    "ppu": 0.55,
    "batters": ["Regular", "Chocolate"],
    "topping": ["None", "Glazed", "Chocolate", "Maple"]
  }];
  
  $scope.lookup = function() {
    $http.get('http://httpbin.org/encoding/utf8').then(function success(response) {
      $scope.output = response.data;
    }, function error(response) {
      $scope.output = data;
    });
  };

})
</script>

</html>